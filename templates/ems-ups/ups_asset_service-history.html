{% extends 'ems-ups/base.html' %} {% load static %}
{% block css %} 
<link rel="stylesheet" href="{% static './css/asset.css' %}">
{% endblock %}

{% block content %} 

<div class="cont">

  <div class="internal_nav"> 
    <div class="row" >
        <div><p><a href="{% url 'upsDashboard' device_id %}">Dashboard</a></p></div>

        <div class="drop_asset">
          <p>KPI</p>
   
          <div class="drop-down">
            <div>
              <a href="{% url 'upsEnergyPara' device_id %}"
                >Energy Parameters</a
              >
            </div>
            <hr />
            <div>
              <a href="{% url 'upsLoadKPI' device_id %}">Load Side KPI</a>
            </div>
            <hr />
            <div>
              <a href="{% url 'upsDeviceInfoKPI' device_id %}"
                >EMS Device Info</a
              >
            </div>
          </div>
   
          </div> 

       <div class="drop_asset active_link">
       <p>Asset Information</p>

       <div class="drop-down">
        <div>
          <a href="{% url 'upsasset_detail' device_id %}"
            >Asset Detail</a
          >
        </div>
        <hr />
        <div>
          <a href="{% url 'upsservice_history' device_id %}"
            >Service History</a
          >
        </div>
      </div>

       </div> 

       
       <div class="drop_asset">
        <p>Reports</p>
 
        <div class="drop-down">
         
          <div><a href="{% url 'upsoperational_report' device_id %}"> Operational Report</a></div>
          
        </div>
        </div> 

         <div ><p><a href="{% url 'upsdevice_alert' device_id %}">Alerts</a></p></div>

    </div>
</div>
<!-- class ="internal_nav" ends here -->




<div class="asset_detail">
 
    <div class="asset_img"><img src="{% static './images/ups.png' %}" alt="asset"></div>

    <div class="asset_info">
        <div class="asset_name">Service History</div>
        <div onclick="genPDF()" class="download_info" ><img src="{% static './images/download.png' %}" alt="asset"></div>
    </div>

    <div class="asset-table">
      <table id="service-history-ups">
        <thead>
        <tr class="t_body">
          <th>SERVICE HISTORY</th>
          <th></th>
        </tr>
      </thead>
    
      <tbody>  
    
        <tr class="t_body">
          <td>SERVICE PROVIDER</td>
          <td >{{Details.service_provider}} </td>
        </tr>
    
        <tr class="t_body">
          <td>ADDRESS</td>
          <td>{{Details.address}}  </td>
        </tr>
    
        <tr class="t_body">
          <td>CONTACT</td>
          <td>{{Details.contact}}  </td>
        </tr>

        <tr class="t_body">
          <td>EMAIL</td>
          <td>{{Details.email}}  </td>
        </tr>

        <tr class="t_body">
          <td colspan="2">CONTRACT</td>
        </tr>

        <tr class="t_body">
          <td>CONTRACT TYPE</td>
          <td>{{Contract}} </td>
        </tr>

        <tr class="t_body">
          <td colspan="2">BATTERY SERVICE</td>
        </tr>

        <tr class="t_body">
          <td>LAST BATTERY REPLACED DATE</td>
          <td>{{Details.battery_last_replaced_date}} </td>
        </tr>

        <tr class="t_body">
          <td>NEXT BATTERY REPLACEMENT DUE</td>
          <td>{{Details.battery_next_replacment_date}}  </td>
        </tr>

  
        <tr class="t_body">
          <td colspan="2">LAST SERVICE</td>
        </tr>
    
        <tr class="t_body">
          <td>LAST SERVICE DATE</td>
          <td>{{Details.last_service_date}} </td>
        </tr>
    
        <tr class="t_body">
          <td>ACTIVITY</td>
          <td>{{Details.activity}} </td>
        </tr>
    
        <tr class="t_body">
          <td>REMARK</td>
          <td>{{Details.remark }} </td>
        </tr>


        <tr class="t_body">
          <td colspan="2">NEXT SERVICE</td>
        </tr>
    
        <tr class="t_body">
          <td>NEXT SERVICE DATE</td>
          <td>{{Details.next_service_date}} </td>
        </tr>
    
        <tr class="t_body">
          <td>ACTIVITY</td>
          <td>{{Details.activity1}} </td>
        </tr>
    
        <tr class="t_body">
          <td>REMARK</td>
          <td>{{Details.remark1}} </td>
        </tr>
  
      </tbody>
    
      </table>
    
      <br>
      <br>
    </div>


</div> <!-- class ="asset_detail" ends here -->

</div> 
<!-- class ="cont" ends here -->


<!--PDF Structure-->
<div style=" display: none; font-family:Arial, Helvetica, sans-serif">
  <div id="pdfName" style="font-size: 25px;">Service History</div>
  <div id="customerName" style="font-size: 25px; font-weight: bold;">{{Customer_Name}}</div>
    <div id="assetDetail">
      <div><span style="font-weight: bold;">Asset:</span>UPS_{{Cit}}-{{Loc}}</span></div>
      <div><span style="font-weight: bold;">Rating:</span> {{Details.rating_in_kva}} kVA</div>
    </div>
    <div id="assetAddress">
      <div style="font-weight: bold;">Address:</div> 
      <div>{{Address1}}</div>
    </div>
  </div>

  {% endblock %}


  {% block js %}

<!-- js -->

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.14/jspdf.plugin.autotable.min.js" ></script>
    
    <script type="text/javascript" src="{% static './js/navbar.js' %}"></script>
    <script type="text/javascript" src="{% static './js/ups_pdf-download_service-history.js' %}"></script>


</body>

</html>

{% endblock %}