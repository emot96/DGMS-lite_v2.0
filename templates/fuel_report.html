{% load static %}
<!DOCTYPE html>
<html lang="en">

<head> 
<!-- <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->
<title>{{Loc}}</title>
<!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

<link rel="stylesheet" href="{% static './css/navbar.css' %}">
<link rel="stylesheet" href="{% static './css/dgmsInfo.css' %}">
<link rel="stylesheet" href="{% static './css/internal_nav.css' %}">
<link rel="stylesheet" href="{% static './css/time-range.css' %}">
<link rel="stylesheet" href="{% static './css/report.css' %}">
<link rel="stylesheet" href="{% static './css/footer.css' %}">

</head>


<body>

<!-- Side Vertical Navigation bar-->
<nav>
<!-- Toogle for responsive nav bar-->
<div class="hamburger">
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
</div>

<!-- side nav -->
<div class="sidenav">
  <div class="img"><img src="{% static './images/emot.png' %}" class="logo" alt="logo_emot"></div>

  <div class="dropdown-btn active" ><a href="{% url 'dashboard' %}" ><img src="{% static './images/Dashboard.png' %}" alt="dashboard">Dashboards</a> <button id="a" > + </button> </div>

  <div class="dropdown-container">
    <div class="sub-link active"><a href="{% url 'dashboard' %}">DGMS Dashboard</a></div>
    <div class="sub-link"><a href="#">Coming soon</a> </div>
    <div class="sub-link"><a href="#">Coming soon</a></div>
  </div>

</div>
</nav>
<!--end side nav-->



<div class="main">

<!-- Upper horizontal nav bar -->

<nav class="hor_nav">

  <div class="left">
  <div  class="user_img"> <img src="{% static './images/ccd.png' %}" alt="user_img"></div>
  <div class="name">{{Customer_Name}} </div>
  </div>
  
  {% if request.user.is_user == True %}
        <div class="right">
          <a href="{% url 'device_alert' device_id  %}" target="_blank"
            ><div class="notify">
              <div>
                <img
                  src="{% static './images/notification.png' %}"
                  alt="notifications"
                />
              </div>
              <div class="not-txt">
                <div class="not-no">{{alert_count}}</div>
              </div>
            </div></a
          >
          {% else %}
          <div class="right">
            <a href="{% url 'alert'  %}" target="_blank"
              ><div class="notify">
                <div>
                  <img
                    src="{% static './images/notification.png' %}"
                    alt="notifications"
                  />
                </div>
                <div class="not-txt">
                  <div class="not-no">{{alert_count}}</div>
                </div>
              </div></a
            >
            {% endif %}
  <div class="type"> DGMS </div>
  
  
  
  <div onclick="dropFunction()" class="user_name">{{username}} &ensp; 
   <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
    <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
  </svg>
  </div>
  
  <div id="user-dropdown" class="drop-cont">
    <div> <a href="{% url 'password_change' %}">Change Password</a> </div>
    <hr>
    <div> <a href="{% url 'logoutUser' %}" id="logout">Logout</a></div>
  </div>
  
  
  
  </div>
  </nav><!-- end horizontal nav -->

<div class="dg_info">
  <div class="b"></div>
  <div class="row">
   <div class="dg_info_dev">
   <div class="flex_cont">
    <div class="asset_name">{{Cit}}-{{Loc}}</div>
    <div class="weather-img">
      <img src="http://openweathermap.org/img/w/{{icon}}.png" />
    </div>
    <div class="weather">{{temperature}} &deg; C</div>
    <div class="kva">{{Rat}} kVA</div>
    {% if Star == 1 %}
    <div class="star">
      <img src="{% static './images/star1.png' %}" />
    </div>
    {% elif Star == 2 %}
    <div class="star">
      <img src="{% static './images/star2.png' %}" />
    </div>
    {% elif Star == 3 %}
    <div class="star">
      <img src="{% static './images/star3.png' %}" />
    </div>
    {% elif Star == 4 %}
    <div class="star">
      <img src="{% static './images/star4.png' %}" />
    </div>
    {% else %}
    <div class="star">
      <img src="{% static './images/star5.png' %}" />
    </div>
    {% endif %}
  </div>
    <div class="inst_dgms">DGMS Installation Date: {{DDOI}} </div>
   </div>

   <div class="dg_info_status">
    {% if Stat == 'ON' %}
    <div class="status" id="dg_on">ON</div>
    {% else %}
    <div class="status" id="dg_off">OFF</div>
    {% endif %}
    <div>{{diff}}</div>
   </div>
   </div>
  </div> 


<div class="cont">

  <div class="internal_nav"> 
    <div class="row" >
        <div ><p><a href="{% url 'dgmsDashboard' device_id %}">Dashboard</a></p></div>
        <!-- <div class="active_link" ><p><a href="kpi.html">KPI</a></p></div> -->

        <div class="drop_asset ">
          <p>KPI</p>
   
          <div class="drop-down ">
           
            <div><a href="{% url 'energyPara' device_id %}">Energy Parameters</a></div>
            <hr>
            <div><a href="{% url 'loadKPI' device_id %}">Load Side KPI</a></div>
            <hr>
            <div><a href="{% url 'enginePara' device_id %}">Engine Parameters</a></div>
            <hr>
            <div><a href="{% url 'performanceKPI' device_id %}">Performance based KPI</a></div>
            <hr>
            <div><a href="{% url 'deviceInfoKPI' device_id %}">DGMS Device Info</a></div>
            
          </div>
   
          </div> 

       <div class="drop_asset">
       <p>Asset Information</p>

       <div class="drop-down">
        
         <div ><a href="{% url 'asset' device_id  %}">Asset Detail</a></div>
         <hr>
         <div><a href="{% url 'servicehistory' device_id  %}">Service History</a></div>
         
       </div>

       </div> 

       <div class="drop_asset active_link">
         <p>Reports</p>
 
         <div class="drop-down">
          
           <div><a href="{% url 'fuel_report' device_id  %}">Fuel filled report</a></div>
           <hr>
           <div><a href="{% url 'operational_report' device_id  %}">Operational report</a></div>
           <hr>
           <div><a href="{% url 'performance_report' device_id  %}">Performance report</a></div>
           
         </div>
 
         </div> 

         <div ><p><a href="{% url 'device_alert' device_id  %}">Alerts</a></p></div>

    </div>
  </div> <!-- class ="internal_nav" ends here -->

 <div  class="select-time-bar" id="fuel">
  <div class="page-info">Fuel Report</div>
  <hr>
  
  <div class="time-select">
   <div class="time-range">
  
    <form class="row" method="get">
      {{myFilter.form.as_ul}}
        <div class="go" ><button >Go</button></div>
      </form>
  
   </div>
   
   <div  class="row" >
  
    <div class="time-right">
    <form  class="row" method="get" >
        <select name="time_range">
          {% if TR == None %}
          <option value="" selected disabled hidden>
          Select Time Range
         </option>
          {% else %}
          <option value="" selected disabled hidden>
          {{TR}}
          </option>
          {% endif %}
          <option>Last 30 mins</option>
          <option>Last 1 hour</option>
          <option>Last 2 hours</option>
          <option>Last 7 hours</option>
          <option>Last 12 hours</option>
          <option>Last 24 hours</option>
          <option>Last 2 days</option>
          <option>Last 5 days</option>
          <option>Last 1 week</option>
          <option>Last 2 weeks</option>
          <option>Last 1 month</option>
          <option>Last 2 months</option>
          <option>Last 6 months</option>
          <option>Last 1 year</option>
          <option>Last 2 years</option>
        </select>
      
        <div class="go"><button class="go" type="submit" name="range">GO</button></div>
    </form>
    
  </div>
  </div>
  </div>
  </div> 




<div class="download_report" align="right">

  <div  class="download">
  <div ><img src="{% static './images/download.png' %}" alt="download"> </div>
  <div onclick="reportFunction()" class="dn-txt">Download </div>
  </div>

<div id="report-dropdown" class="report-dropdown-content">
  <div onclick="genPDF()">pdf</div>
  <hr>
  <div onclick="download_table_as_csv('fuel_report')">csv</div>
</div>

</div>

<div class="report">
  <div class="report_table">
    <table id="fuel_report">
      <thead >
      <tr id="fuel"> 
          <th>S.NO</th>
          <th>DATE AND TIME</th>
          <th>FUEL LEVEL (L)</th>
          <th>FUEL ADDED (L)</th>
          <th>NEW FUEL LEVEL (L)</th>
      </tr>
     </thead>

     <tbody>
      {% for f in Fuel %}
                <tr>
                  <td>{{ forloop.counter }}.</td>
                  <td>{{f.device_time}}</td>
                  <td>{{f.fuel_level}}</td>
                  <td>{{f.fuel_added}}</td>
                  <td>{{f.new_fuel_level}}</td>
                </tr>
                {% endfor %}
     </tbody>

     <tfoot>
      <tr>
          <td>Total:</td>
          <td></td>
          <td></td>
          <td>{{Total}} L</td>
          <td></td>
      </tr>
     </tfoot>

  </table>
  </div> <!-- class ="report_table" ends here -->

  <div class="total_records">
    <div class="tr_text">Total Records Fetched: {{Count}} </div>
  </div>

</div> <!-- class ="report" ends here -->

</div> <!-- class ="cont" ends here -->


<div class="report_struct" style=" display: none; font-family:Arial, Helvetica, sans-serif">
  <div id="reportName" style="font-size: 27px;">Fuel Filled Report</div>
  <div id="customerName" style="font-size: 25px; font-weight: bold;">{{Customer_Name}}</div>
  <div id="assetDetail">
    <div><span style="font-weight: bold;">Asset:</span>{{Cit}}-{{Loc}}</span></div>
    <div><span style="font-weight: bold;">Rating:</span> {{Rat}} kVA</div>
    <div><span style="font-weight: bold;">Diesel Tank Size:</span> {{Tank_Size}} Liters</div>
  </div>
  <div id="assetAddress">
    <div style="font-weight: bold;">Address:</div> 
    <div>{{Address}}</div>
  </div>
  <div id="dateRange" >{{enddate}} TO {{startdate}}</div>
  <div id="fuelCon"><span style="font-weight: bold;">Total Added:</span> {{Total}} L</div>
  <table id="reportTable">
    <thead >
    <tr > 
        <th>S.NO</th>
        <th>DATE AND TIME</th>
        <th>FUEL LEVEL (L)</th>
        <th>FUEL ADDED (L)</th>
        <th>NEW FUEL LEVEL (L)</th>
    </tr>
   </thead>

   <tbody>   
    {% for f in Fuel %}
    <tr>
    <td>{{ forloop.counter }}.</td>
    <td>{{f.device_time}}</td>
    <td>{{f.fuel_level}}</td>
    <td>{{f.fuel_added}}</td>
    <td>{{f.new_fuel_level}}</td>
    {% endfor %}
    </tr>

 <!-- -------------------------Footer of table-------------------- -->          
  <tr>
    <td >Total:</td>
    <td></td>
    <td></td>
    <td>{{Total}} L</td>
    <td></td>
 </tr>

<tr>
  <td >Total Record Fetched:</td>
  <td> {{Count}}</td>
  <td></td>
  <td></td>
  <td></td>
</tr>

   </tbody>
</table>
</div>







<div class="footer">
  <div class="footer-content">
    <div>Â© 2021 eMoT. All Rights Reserved.</div>

    <div class="web-links">
      <div><a href="https://www.emot.co.in/about-us/" target="_blank">About us</a></div>
      <div><a href="https://www.emot.co.in/contact/" target="_blank">Contact us</a></div>
      <div><a href="https://www.emot.co.in/emot/" target="_blank">eMoT IoT</a></div>
    </div>

    <div class="social-media">
    <a href="https://www.facebook.com/emot.co.in/" target="_blank"><img src="{% static './images/facebook.png' %}" alt="facebook"  title="facebook"></a>
    <a href="https://twitter.com/Emot86007134" target="_blank"><img src="{% static './images/twitter.png' %}" alt="twitter" title="twitter"></a>
    <a href="https://www.linkedin.com/company/emot-elekron/" target="_blank"><img src="{% static './images/linkedin.png' %}" alt="linkedin" title="linkedin"></a>
    <a href="https://www.instagram.com/elekronemot/" target="_blank"><img src="{% static './images/instagram.png' %}" alt="instagram" title="instagram"></a>
    </div>
  </div>
</div>

</div> <!--class="main" ends here-->

<!-- js -->

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.14/jspdf.plugin.autotable.min.js" ></script>
    

    <script type="text/javascript" src="{% static './js/navbar.js' %}"></script>
    <script type="text/javascript" src="{% static './js/report.js' %}"></script>
    <script type="text/javascript" src="{% static './js/download_csv.js' %}"></script>
    <script type="text/javascript" src="{% static './js/download_pdf.js' %}"></script>

</body>

</html>